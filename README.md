[![Coverage Status](https://coveralls.io/repos/github/OpenIndustryCloud/fission-go-add-risk-data/badge.svg?branch=master)](https://coveralls.io/github/OpenIndustryCloud/fission-go-add-risk-data?branch=master)


# Add Risk Data API

This API would would accept transformed TYPE FORM data, Weather Details, Risk Data and update payload to create ticket in Zendesk

## API reference

No external API called by this API


## Authentication

No Authentication needed for this API

## Error hanlding

Empty Payload or malformed JSON would result in error reponse.

- Technical error :  `{"status":400,"message":"EOF"}`
- Malformed JSON `{"status":400,"message":"invalid character 'a' looking for beginning of object key string"}`

## Sample Input/Output

- Request payload

```
{"media-bucket":{"media":[{"bucket":"artifacts-image","media-link":"https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/bDqieWcakP?generation=1511280761608808\u0026alt=media","name":"bDqieWcakP","original-link":"https://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg","size":147225},{"bucket":"artifacts-image","media-link":"https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/mZLZrevZUP?generation=1511280764595952\u0026alt=media","name":"mZLZrevZUP","original-link":"https://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg","size":493592},{"bucket":"artifacts-image","media-link":"https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/AcukWWdZZo?generation=1511280766663639\u0026alt=media","name":"AcukWWdZZo","original-link":"https://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg","size":111722}],"status":200},"tranformed-data":{"status":200,"storm_claim_data":{"damage_image_url_1":"https://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg","damage_image_url_2":"https://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg","damage_video_url":"https://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg","estimate_image_url":"https://admin.typeform.com/form/results/file/download/H8mm3s/wFpTHm7AZVNO/3283385abc0b-1111.jpg","incident_date":"2017-10-12","incident_place":"London"},"ticket_details":{"ticket":{"comment":{"html_body":"\u003cp\u003e\u003cb\u003eIf it is safe and possible to do so, please provide images of the damage to both the outside and the inside of your home.\u003c/b\u003e \u003ca href='https://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg'\u003ehttps://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg\u003c/a\u003e\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eWhen did the incident happen?\u003c/b\u003e : 2017-10-12\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eWould you like to upload more images?\u003c/b\u003e : \u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIf you have been provided with a repair estimate from a contractor or tradesman, you can upload this by providing a clear photo of the document or upload an existing file.\u003c/b\u003e \u003ca href='https://admin.typeform.com/form/results/file/download/H8mm3s/wFpTHm7AZVNO/3283385abc0b-1111.jpg'\u003ehttps://admin.typeform.com/form/results/file/download/H8mm3s/wFpTHm7AZVNO/3283385abc0b-1111.jpg\u003c/a\u003e\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eWhere did the incident happen? (City/town name)\u003c/b\u003e : London\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIf it is safe and possible to do so, please take a short video to include any areas of damage. Hold the camera in landscape orientation and include a voice narration if you can to help explain the situation.\u003c/b\u003e \u003ca href='https://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg'\u003ehttps://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg\u003c/a\u003e\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eAre you still have possession of the damage items (i.e. damaged guttering)?\u003c/b\u003e : \u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIf you have any other insurance or warranties covering your home, please advise us of the company name.\u003c/b\u003e : Also insured by Aviva\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eAre you aware of anything else relevant to your claim that you would like to advise us of at this stage?\u003c/b\u003e : Nothing as such\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIf there has been any recent maintenance carried out on your home, please describe it\u003c/b\u003e : no maintaince\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIn as much detail as possible, please use the text box below to describe the full extent of the damage to your home and how you discovered it.\u003c/b\u003e : Tree fell on the roof\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003ePlease describe the details of the condition of your home prior to discovering the damage\u003c/b\u003e : all fine\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eIf it is safe and possible to do so, please provide images of the damage to both the outside and the inside of your home.\u003c/b\u003e \u003ca href='https://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg'\u003ehttps://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg\u003c/a\u003e\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eWould you like to upload more images?\u003c/b\u003e : \u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cb\u003eWe have made the following assumptions about your property, you and anyone living with you\u003c/b\u003e : \u003c/p\u003e\u003chr\u003e"},"priority":"normal","requester":{"email":"amitkumarvarman@gmail.com","locale_id":1,"name":"Amit","phone":"321421421321","policy_number":"DU32432432"},"status":"new","subject":"Storm surge claim","type":"incident"}},"tv_claim_data":{"tv_reciept_image_url":""},"weather_api_input":{"city":"London","date":"20171012"}},"weather-data":{"history":{"dailysummary":[{"fog":"0","maxpressurem":"1022","maxtempm":"20","maxwspdm":"28","minpressurem":"1013","mintempm":"10","minwspdm":"11","rain":"0","tornado":"0"}],"observations":[{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 112320Z 25011KT CAVOK 12/09 Q1013","precipi":"-9999.00","precipm":"-9999.00","pressurei":"29.92","pressurem":"1013","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"clear","metar":"METAR EGMC 112350Z 25011KT CAVOK 12/08 Q1013","precipi":"-9999.00","precipm":"-9999.00","pressurei":"29.92","pressurem":"1013","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120050Z 25009KT CAVOK 12/09 Q1014","precipi":"-9999.00","precipm":"-9999.00","pressurei":"29.95","pressurem":"1014","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120150Z 24008KT CAVOK 11/08 Q1015","precipi":"-9999.00","precipm":"-9999.00","pressurei":"29.98","pressurem":"1015","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"9.2","wspdm":"14.8"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120250Z 24009KT CAVOK 11/08 Q1016","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.01","pressurem":"1016","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120320Z 24009KT CAVOK 11/08 Q1016","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.01","pressurem":"1016","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120350Z 23009KT CAVOK 11/08 Q1016","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.01","pressurem":"1016","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120420Z 24009KT CAVOK 11/08 Q1017","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.04","pressurem":"1017","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120450Z 24008KT CAVOK 11/08 Q1017","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.04","pressurem":"1017","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"9.2","wspdm":"14.8"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120520Z 25009KT CAVOK 11/08 Q1018","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.06","pressurem":"1018","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"88","icon":"clear","metar":"METAR EGMC 120550Z 25007KT CAVOK 11/09 Q1018","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.06","pressurem":"1018","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"8.1","wspdm":"13.0"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"87","icon":"clear","metar":"METAR EGMC 120620Z 24009KT CAVOK 10/08 Q1019","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.09","pressurem":"1019","rain":"0","snow":"0","tempi":"50.0","tempm":"10.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"partlycloudy","metar":"METAR EGMC 120650Z 23007KT 9999 FEW048 11/08 Q1019","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.09","pressurem":"1019","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"8.1","wspdm":"13.0"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"partlycloudy","metar":"METAR EGMC 120720Z 23006KT 9999 FEW048 11/08 Q1019","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.09","pressurem":"1019","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"6.9","wspdm":"11.1"},{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 120750Z 23009KT CAVOK 12/09 Q1019","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.09","pressurem":"1019","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Clear","dewpti":"50.0","dewptm":"10.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"88","icon":"clear","metar":"METAR EGMC 120820Z 23006KT CAVOK 12/10 Q1020","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.12","pressurem":"1020","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"6.9","wspdm":"11.1"},{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"clear","metar":"METAR EGMC 120850Z 23010KT CAVOK 13/09 Q1020","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.12","pressurem":"1020","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Clear","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"clear","metar":"METAR EGMC 120920Z 24013KT 220V280 CAVOK 13/09 Q1020","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.12","pressurem":"1020","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"15.0","wspdm":"24.1"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"72","icon":"partlycloudy","metar":"METAR EGMC 120950Z 24012KT 9999 FEW022 14/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"57.2","tempm":"14.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"13.8","wspdm":"22.2"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"67","icon":"partlycloudy","metar":"METAR EGMC 121020Z 24012KT 9999 FEW020 15/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"59.0","tempm":"15.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"13.8","wspdm":"22.2"},{"conds":"Partly Cloudy","dewpti":"50.0","dewptm":"10.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"68","icon":"partlycloudy","metar":"METAR EGMC 121050Z 23012KT 9999 FEW023 16/10 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"60.8","tempm":"16.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"13.8","wspdm":"22.2"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"59","icon":"partlycloudy","metar":"METAR EGMC 121120Z 23013KT 9999 FEW024 17/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"15.0","wspdm":"24.1"},{"conds":"Scattered Clouds","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"63","icon":"partlycloudy","metar":"METAR EGMC 121150Z 25010KT 9999 SCT027 16/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"60.8","tempm":"16.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"250","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Scattered Clouds","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121220Z 24013KT 9999 SCT031 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"15.0","wspdm":"24.1"},{"conds":"Scattered Clouds","dewpti":"50.0","dewptm":"10.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"52","icon":"partlycloudy","metar":"METAR EGMC 121250Z 24012KT 200V280 9999 SCT033 20/10 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"68.0","tempm":"20.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"13.8","wspdm":"22.2"},{"conds":"Scattered Clouds","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121320Z 24013KT 200V280 9999 SCT034 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"240","wdire":"WSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"15.0","wspdm":"24.1"},{"conds":"Scattered Clouds","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"52","icon":"partlycloudy","metar":"METAR EGMC 121350Z 23013KT 9999 SCT040 18/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"64.4","tempm":"18.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"15.0","wspdm":"24.1"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121420Z 23011KT 9999 FEW043 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121450Z 23015KT 9999 FEW040 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"17.3","wspdm":"27.8"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121520Z 23012KT 9999 FEW043 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"13.8","wspdm":"22.2"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"55","icon":"partlycloudy","metar":"METAR EGMC 121550Z 23011KT 9999 FEW043 17/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"62.6","tempm":"17.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Partly Cloudy","dewpti":"44.6","dewptm":"7.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"59","icon":"partlycloudy","metar":"METAR EGMC 121620Z 23009KT 9999 FEW043 15/07 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"59.0","tempm":"15.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"230","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"63","icon":"partlycloudy","metar":"METAR EGMC 121650Z 22009KT 9999 FEW037 15/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"59.0","tempm":"15.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"63","icon":"partlycloudy","metar":"METAR EGMC 121720Z 22008KT 9999 FEW030 15/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"59.0","tempm":"15.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"9.2","wspdm":"14.8"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"72","icon":"partlycloudy","metar":"METAR EGMC 121750Z 21009KT 9999 FEW030 14/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"57.2","tempm":"14.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"210","wdire":"SSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"67","icon":"partlycloudy","metar":"METAR EGMC 121820Z 21010KT 9999 FEW030 15/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"59.0","tempm":"15.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"210","wdire":"SSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"72","icon":"partlycloudy","metar":"METAR EGMC 121850Z 21010KT 9999 FEW038 14/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"57.2","tempm":"14.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"210","wdire":"SSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"72","icon":"partlycloudy","metar":"METAR EGMC 121920Z 21011KT 9999 FEW036 13/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"210","wdire":"SSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Partly Cloudy","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"72","icon":"partlycloudy","metar":"METAR EGMC 121950Z 22010KT 9999 FEW036 13/08 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"partlycloudy","metar":"METAR EGMC 122020Z 21009KT 9999 FEW031 13/09 Q1021","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.15","pressurem":"1021","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"210","wdire":"SSW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Mostly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"mostlycloudy","metar":"METAR EGMC 122050Z 22009KT 9999 BKN028 13/09 Q1022","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.18","pressurem":"1022","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"10.4","wspdm":"16.7"},{"conds":"Mostly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"mostlycloudy","metar":"METAR EGMC 122120Z 22011KT 9999 BKN026 12/09 Q1022","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.18","pressurem":"1022","rain":"0","snow":"0","tempi":"53.6","tempm":"12.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"12.7","wspdm":"20.4"},{"conds":"Scattered Clouds","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"77","icon":"partlycloudy","metar":"METAR EGMC 122150Z 22010KT 9999 SCT026 13/09 Q1022","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.18","pressurem":"1022","rain":"0","snow":"0","tempi":"55.4","tempm":"13.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Partly Cloudy","dewpti":"48.2","dewptm":"9.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"88","icon":"partlycloudy","metar":"METAR EGMC 122220Z 22010KT 9999 FEW026 11/09 Q1022","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.18","pressurem":"1022","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"6.2","vism":"10.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"11.5","wspdm":"18.5"},{"conds":"Clear","dewpti":"46.4","dewptm":"8.0","fog":"0","hail":"0","heatindexi":"-9999","heatindexm":"-9999","hum":"82","icon":"clear","metar":"METAR EGMC 122250Z 22006KT CAVOK 11/08 Q1022","precipi":"-9999.00","precipm":"-9999.00","pressurei":"30.18","pressurem":"1022","rain":"0","snow":"0","tempi":"51.8","tempm":"11.0","thunder":"0","tornado":"0","visi":"-9999.0","vism":"-9999.0","wdird":"220","wdire":"SW","wgusti":"-9999.0","wgustm":"-9999.0","windchilli":"-999","windchillm":"-999","wspdi":"6.9","wspdm":"11.1"}]},"response":{"version":"0.1"},"status":200},"weather-risk":{"description":"Possibly stormy weather","riskScore":60,"status":200}}

```
- Response

```
{
    "status": 200,
    "ticket": {
        "type": "incident",
        "subject": "Storm surge claim",
        "priority": "normal",
        "status": "new",
        "comment": {
            "html_body": "<p><b>If it is safe and possible to do so, please provide images of the damage to both the outside and the inside of your home.</b> <a href='https://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg'>https://admin.typeform.com/form/results/file/download/H8mm3s/j79cNctIvogK/a5dee9af0910-tree_damage_resized.jpg</a></p><hr><p><b>When did the incident happen?</b> : 2017-10-12</p><hr><p><b>Would you like to upload more images?</b> : </p><hr><p><b>If you have been provided with a repair estimate from a contractor or tradesman, you can upload this by providing a clear photo of the document or upload an existing file.</b> <a href='https://admin.typeform.com/form/results/file/download/H8mm3s/wFpTHm7AZVNO/3283385abc0b-1111.jpg'>https://admin.typeform.com/form/results/file/download/H8mm3s/wFpTHm7AZVNO/3283385abc0b-1111.jpg</a></p><hr><p><b>Where did the incident happen? (City/town name)</b> : London</p><hr><p><b>If it is safe and possible to do so, please take a short video to include any areas of damage. Hold the camera in landscape orientation and include a voice narration if you can to help explain the situation.</b> <a href='https://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg'>https://admin.typeform.com/form/results/file/download/H8mm3s/63907004/c23534bd5270-wall_damaged.jpg</a></p><hr><p><b>Are you still have possession of the damage items (i.e. damaged guttering)?</b> : </p><hr><p><b>If you have any other insurance or warranties covering your home, please advise us of the company name.</b> : Also insured by Aviva</p><hr><p><b>Are you aware of anything else relevant to your claim that you would like to advise us of at this stage?</b> : Nothing as such</p><hr><p><b>If there has been any recent maintenance carried out on your home, please describe it</b> : no maintaince</p><hr><p><b>In as much detail as possible, please use the text box below to describe the full extent of the damage to your home and how you discovered it.</b> : Tree fell on the roof</p><hr><p><b>Please describe the details of the condition of your home prior to discovering the damage</b> : all fine</p><hr><p><b>If it is safe and possible to do so, please provide images of the damage to both the outside and the inside of your home.</b> <a href='https://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg'>https://admin.typeform.com/form/results/file/download/H8mm3s/63907299/db1520b975ae-jf8bp2ad1ajgbrcla5l0e425vj6099l.jpeg</a></p><hr><p><b>Would you like to upload more images?</b> : </p><hr><p><b>We have made the following assumptions about your property, you and anyone living with you</b> : </p><hr>"
        },
        "custom_fields": [
            {
                "id": 114100712171,
                "value": "60 : Possibly stormy weather"
            },
            {
                "id": 114101778331,
                "value": "true"
            },
            {
                "id": 114100657672,
                "value": "MEDIUM"
            },
            {
                "id": 114100596852,
                "value": "28"
            },
            {
                "id": 114099964311,
                "value": "Storm Surge"
            },
            {
                "id": 114100658992,
                "value": "321421421321"
            },
            {
                "id": 114100659172,
                "value": "amitkumarvarman@gmail.com"
            },
            {
                "id": 114101736271,
                "value": "0"
            },
            {
                "id": 114101729171,
                "value": "https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/bDqieWcakP?generation=1511280761608808&alt=media"
            },
            {
                "id": 114101729331,
                "value": "https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/mZLZrevZUP?generation=1511280764595952&alt=media"
            },
            {
                "id": 114101655952,
                "value": "https://www.googleapis.com/download/storage/v1/b/artifacts-image/o/AcukWWdZZo?generation=1511280766663639&alt=media"
            }
        ],
        "requester": {
            "locale_id": 1,
            "name": "Amit",
            "email": "amitkumarvarman@gmail.com",
            "phone": "321421421321",
            "policy_number": "DU32432432"
        },
        "ticket_form_id": 114093996871,
        "event_id": "",
        "token": "",
        "submitted_at": "0001-01-01T00:00:00Z"
    }
}
```


## Example Usage

## 1.  Deploy as Fission Functions

First, set up your fission deployment with the go environment.

```
fission env create --name go-env --image fission/go-env:1.8.1
```

To ensure that you build functions using the same version as the
runtime, fission provides a docker image and helper script for
building functions.


- Download the build helper script

```
$ curl https://raw.githubusercontent.com/fission/fission/master/environments/go/builder/go-function-build > go-function-build
$ chmod +x go-function-build
```

- Build the function as a plugin. Outputs result to 'function.so'

`$ go-function-build add-risk-data.go`

- Upload the function to fission

`$ fission function create --name add-risk-data --env go-env --package function.so`

- Map /add-risk-data to the add-risk-data function

`$ fission route create --method POST --url /add-risk-data --function add-risk-data`

- Run the function

```$ curl -d `sample request` -H "Content-Type: application/json" -X POST http://$FISSION_ROUTER/add-risk-data```

## 2. Deploy as AWS Lambda

> to be updated
